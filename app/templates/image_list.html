<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/image.css') }}">
</head>
<body>
<div class="container">
    <div class="image-container">
        {% for image in images %}
            <div class="image-item" id="{{ image }}">
                <img class="thumbnail" src="{{ url_for('image.get_image', filename=image) }}" alt="{{ image }}">
                <button class="move-button" onclick="moveImage('{{ image }}')">Move</button>
            </div>
        {% endfor %}
    </div>
    <div class="pagination">
        {% if page > 1 %}
            <a href="{{ url_for('image.image_list', page=page-1) }}">&lt;</a>
        {% endif %}
        {% for p in range(max(1, page - 5), min(total_pages, page + 5) + 1) %}
            <a href="{{ url_for('image.image_list', page=p) }}" class="{{ 'active' if p == page else '' }}">{{ p }}</a>
        {% endfor %}
        {% if page < total_pages %}
            <a href="{{ url_for('image.image_list', page=page+1) }}">&gt;</a>
        {% endif %}
    </div>
    <button class="delete-button" onclick="deleteImages()">Delete</button>
</div>
<script>
    function moveImage(filename) {
        fetch(`/move_image/${filename}`, { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    document.getElementById(filename).remove();
                }
            });
    }

    function deleteImages() {
        fetch('/delete_images', { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    window.location.reload();
                }
            });
    }
</script>
</body>
</html>
